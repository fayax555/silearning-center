name: Frist Workflow
on: workflow_dispatch
jobs:
  first-job:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - uses: pnpm/action-setup@v2
        with:
          version: 6.0.2
          run_install: |
            - recursive: true
              args: [--frozen-lockfile, --strict-peer-dependencies]
            - args: [--global, pm2]
            
      - name: executing remote ssh commands using ssh key
        uses: appleboy/ssh-action@v0.1.6
        with:
          host: 129.154.224.17
          username: ubuntu
          key: ${{ secrets.SSHKEY }}
          script: |
            cd /home/ubuntu/sites/silearning-center/website
            git pull
            pnpm build
            pm2 reload all
